<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>KoreBot Library: koala.c File Reference</title>
<link href="kteamdoxy.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>koala.c File Reference</h1>This module provides useful basic facilities to use a Hemisson Robot from KoreBot. <a href="#_details">More...</a>
<p>

<p>
<div class="dynheader">
Include dependency graph for koala.c:</div>
<div class="dynsection">
<p><center><img src="koala_8c__incl.png" border="0" usemap="#koala.c_map" alt=""></center>
<map name="koala.c_map">
<area shape="rect" href="korebot_8h.html" title="korebot.h" alt="" coords="1569,81,1644,105"><area shape="rect" href="kb__init_8h.html" title="kb_init.h" alt="" coords="1251,156,1320,180"><area shape="rect" href="kb__error_8h.html" title="kb_error.h" alt="" coords="1344,156,1421,180"><area shape="rect" href="kb__memory_8h.html" title="kb_memory.h" alt="" coords="1445,156,1544,180"><area shape="rect" href="kb__time_8h.html" title="kb_time.h" alt="" coords="1568,156,1645,180"><area shape="rect" href="kb__cmdparser_8h.html" title="kb_cmdparser.h" alt="" coords="1669,156,1781,180"><area shape="rect" href="kb__symbol_8h.html" title="kb_symbol.h" alt="" coords="1805,156,1901,180"><area shape="rect" href="kb__config_8h.html" title="kb_config.h" alt="" coords="1925,156,2013,180"><area shape="rect" href="kb__socket_8h.html" title="kb_socket.h" alt="" coords="549,156,640,180"><area shape="rect" href="kb__sound_8h.html" title="kb_sound.h" alt="" coords="2037,156,2125,180"><area shape="rect" href="kb__wav_8h.html" title="kb_wav.h" alt="" coords="2149,156,2224,180"><area shape="rect" href="kb__gpio_8h.html" title="kb_gpio.h" alt="" coords="2248,156,2325,180"><area shape="rect" href="kb__pwm_8h.html" title="kb_pwm.h" alt="" coords="2349,156,2429,180"><area shape="rect" href="kb__lrf_8h.html" title="kb_lrf.h" alt="" coords="2453,156,2517,180"><area shape="rect" href="kb__khepera3_8h.html" title="kb_khepera3.h" alt="" coords="2592,156,2699,180"><area shape="rect" href="knet_8h.html" title="knet.h" alt="" coords="2617,230,2673,254"><area shape="rect" href="kb__gripper_8h.html" title="kb_gripper.h" alt="" coords="2723,156,2813,180"><area shape="rect" href="kbot_8h.html" title="kbot.h" alt="" coords="2837,156,2893,180"><area shape="rect" href="kmot_8h.html" title="kmot.h" alt="" coords="2917,156,2979,180"><area shape="rect" href="hem_8h.html" title="hem.h" alt="" coords="3003,156,3059,180"><area shape="rect" href="koala_8h.html" title="koala.h" alt="" coords="3083,156,3147,180"><area shape="rect" href="koreio_8h.html" title="koreio.h" alt="" coords="3171,156,3237,180"><area shape="rect" href="ltc1663_8h.html" title="ltc1663.h" alt="" coords="3261,156,3336,180"></map>
</div>

<p>
<a href="koala_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39">koa_get_nextValue</a> (char *current, char *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#7dc1f8a59405e1bc6f3f2a795c8fca4f">koa_getOSVersion</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, unsigned char *version, unsigned char *revision, unsigned char *pversion, unsigned char *prevision)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#593ec88734d2e817a81d18a9ada447f2">koa_setPidPosition</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int Kp, int Ki, int Kd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#375a495b9e50786b06c6a290c94f2dfe">koa_setPositionCounter</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, long pos_left, long pos_right)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#fbd5419ae5e9df4dfc9c450358f49eb0">koa_setPidSpeed</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int Kp, int Ki, int Kd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#5e59b725e414e0312c5ea8c067111dbd">koa_setPosition</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, long pos_left, long pos_right)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#44c2a7d9bcf184de7baade19c92ac893">koa_readSpeed</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int *speedtable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#0adebfdf4c895ea8ca67300bbb467fea">koa_readPosition</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int *postable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#ba9d5ff27a7af8547dd5bbde3ae6d5df">koa_readInput</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int channel)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#ee0fc250d8eacfa8b37c260c2e60e5ae">koa_readAD</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int channel)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#6883b19613f76681aefb5ddadaa8fd15">koa_setProfile</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int max_speed_left, int acc_left, int max_speed_right, int acc_right)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#311e000617e027e2dc6436a1f3bd5a44">koa_readStatus</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int *statustable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#9ef732be68a99ce9e9cbf3d94b359071">koa_changeLed</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, short int led, short int action)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#0e3de8c5ae6c312fd4dca6c220941f77">koa_readSensor</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int sensor)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#25b7fcd976cee429c949b50b606ea842">koa_setSpeed</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, short int left, short int right)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#32ba474658cf60ad790798a3901080ea">koa_readBattery</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#11cc859ced946dfdf17d14214ff63fb5">koa_readAmbient</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int *senstable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#85da6430792e704136f02fc4ade5b8f2">koa_setPWM</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int left, int right)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#dc8b7cf0c53ad8fd6dbd6f2848d8626b">koa_setOutput</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int output, int action)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="koala_8c.html#faccc5859f1ce4adda3e19c911fd4b70">koa_readProximity</a> (<a class="el" href="structknet__dev__s.html">knet_dev_t</a> *dev, int *senstable)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This module provides useful basic facilities to use a Hemisson Robot from KoreBot. 
<p>
Koala Robot Support for KoreBot.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>P. Bureau (K-Team SA)</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Copyright (C) 2004 K-TEAM SA </dd></dl>
<dl compact><dt><b><a class="el" href="bug.html#_bug000021">Bug:</a></b></dt><dd>none discovered. </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>nothing. </dd></dl>

<p>Definition in file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="9ef732be68a99ce9e9cbf3d94b359071"></a><!-- doxytag: member="koala.c::koa_changeLed" ref="9ef732be68a99ce9e9cbf3d94b359071" args="(knet_dev_t *dev, short int led, short int action)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_changeLed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&nbsp;</td>
          <td class="paramname"> <em>led</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&nbsp;</td>
          <td class="paramname"> <em>action</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform an action on one of the two LEDs of the robot. Possible actions are: 0: turn OFF, 1: turn ON, 2: change status. The LED number 0 is the lateral one, the LED number 1 is the frontal one.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>led</em>&nbsp;</td><td>The led number to change </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>to be done </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00451">451</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_9ef732be68a99ce9e9cbf3d94b359071_cgraph.png" border="0" usemap="#koala_8c_9ef732be68a99ce9e9cbf3d94b359071_cgraph_map" alt=""></center>
<map name="koala_8c_9ef732be68a99ce9e9cbf3d94b359071_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="183,54,265,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="165,102,283,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="335,6,415,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="332,54,417,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="333,102,416,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="4d5572ad917e13387dc93ad78e009e39"></a><!-- doxytag: member="koala.c::koa_get_nextValue" ref="4d5572ad917e13387dc93ad78e009e39" args="(char *current, char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* koa_get_nextValue           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00028">28</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>Referenced by <a class="el" href="koala_8c-source.html#l00346">koa_readAD()</a>, <a class="el" href="koala_8c-source.html#l00575">koa_readAmbient()</a>, <a class="el" href="koala_8c-source.html#l00543">koa_readBattery()</a>, <a class="el" href="koala_8c-source.html#l00315">koa_readInput()</a>, <a class="el" href="koala_8c-source.html#l00280">koa_readPosition()</a>, <a class="el" href="koala_8c-source.html#l00673">koa_readProximity()</a>, <a class="el" href="koala_8c-source.html#l00482">koa_readSensor()</a>, <a class="el" href="koala_8c-source.html#l00242">koa_readSpeed()</a>, and <a class="el" href="koala_8c-source.html#l00414">koa_readStatus()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7dc1f8a59405e1bc6f3f2a795c8fca4f"></a><!-- doxytag: member="koala.c::koa_getOSVersion" ref="7dc1f8a59405e1bc6f3f2a795c8fca4f" args="(knet_dev_t *dev, unsigned char *version, unsigned char *revision, unsigned char *pversion, unsigned char *prevision)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_getOSVersion           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>revision</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>pversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>prevision</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function returns the version of the Koala OS and the protocol revision . <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00051">51</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>Referenced by <a class="el" href="koala__demo_8c-source.html#l00461">main()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_7dc1f8a59405e1bc6f3f2a795c8fca4f_cgraph.png" border="0" usemap="#koala_8c_7dc1f8a59405e1bc6f3f2a795c8fca4f_cgraph_map" alt=""></center>
<map name="koala_8c_7dc1f8a59405e1bc6f3f2a795c8fca4f_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="199,54,281,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="181,102,299,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="351,6,431,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="348,54,433,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="349,102,432,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="ee0fc250d8eacfa8b37c260c2e60e5ae"></a><!-- doxytag: member="koala.c::koa_readAD" ref="ee0fc250d8eacfa8b37c260c2e60e5ae" args="(knet_dev_t *dev, int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readAD           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the 10 bit value corresponding to the channel_number analog input. The value 1024 corresponds to an analog value of 4,09 Volts.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>The channel number to read</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;0 on error or the A/D value on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00346">346</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_ee0fc250d8eacfa8b37c260c2e60e5ae_cgraph.png" border="0" usemap="#koala_8c_ee0fc250d8eacfa8b37c260c2e60e5ae_cgraph_map" alt=""></center>
<map name="koala_8c_ee0fc250d8eacfa8b37c260c2e60e5ae_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="172,54,255,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="155,102,272,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="148,150,279,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="332,6,412,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="329,54,415,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="331,102,413,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="11cc859ced946dfdf17d14214ff63fb5"></a><!-- doxytag: member="koala.c::koa_readAmbient" ref="11cc859ced946dfdf17d14214ff63fb5" args="(knet_dev_t *dev, int *senstable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readAmbient           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>senstable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the koala ambient liht sensor value. The 16 values are returned within the senstable, which must be allocated by the caller.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>senstable</em>&nbsp;</td><td>An array of 16 integer to store the sensor values</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00575">575</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_11cc859ced946dfdf17d14214ff63fb5_cgraph.png" border="0" usemap="#koala_8c_11cc859ced946dfdf17d14214ff63fb5_cgraph_map" alt=""></center>
<map name="koala_8c_11cc859ced946dfdf17d14214ff63fb5_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="201,54,284,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="184,102,301,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="177,150,308,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="361,6,441,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="359,54,444,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="360,102,443,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="32ba474658cf60ad790798a3901080ea"></a><!-- doxytag: member="koala.c::koa_readBattery" ref="32ba474658cf60ad790798a3901080ea" args="(knet_dev_t *dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readBattery           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the charge level of the battery. The number returned is the charge expressed in mAh.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;0 on error or the charge level on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00543">543</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_32ba474658cf60ad790798a3901080ea_cgraph.png" border="0" usemap="#koala_8c_32ba474658cf60ad790798a3901080ea_cgraph_map" alt=""></center>
<map name="koala_8c_32ba474658cf60ad790798a3901080ea_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="196,54,279,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="179,102,296,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="172,150,303,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="356,6,436,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="353,54,439,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="355,102,437,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="ba9d5ff27a7af8547dd5bbde3ae6d5df"></a><!-- doxytag: member="koala.c::koa_readInput" ref="ba9d5ff27a7af8547dd5bbde3ae6d5df" args="(knet_dev_t *dev, int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readInput           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the status of the general input lines.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>The channel number to read</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;0 on error or the input value on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00315">315</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_ba9d5ff27a7af8547dd5bbde3ae6d5df_cgraph.png" border="0" usemap="#koala_8c_ba9d5ff27a7af8547dd5bbde3ae6d5df_cgraph_map" alt=""></center>
<map name="koala_8c_ba9d5ff27a7af8547dd5bbde3ae6d5df_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="183,54,265,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="165,102,283,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="159,150,289,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="343,6,423,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="340,54,425,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="341,102,424,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="0adebfdf4c895ea8ca67300bbb467fea"></a><!-- doxytag: member="koala.c::koa_readPosition" ref="0adebfdf4c895ea8ca67300bbb467fea" args="(knet_dev_t *dev, int *postable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readPosition           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>postable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the 32 bit position counter of the two motors. The unit is the pulse.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>postable</em>&nbsp;</td><td>Array of 2 integer to store the position readings</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>postable[0] is left motor speed <p>
postable[1] is right motor speed </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00280">280</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>Referenced by <a class="el" href="koala__GoAutomation_8c-source.html#l00111">thread()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_0adebfdf4c895ea8ca67300bbb467fea_cgraph.png" border="0" usemap="#koala_8c_0adebfdf4c895ea8ca67300bbb467fea_cgraph_map" alt=""></center>
<map name="koala_8c_0adebfdf4c895ea8ca67300bbb467fea_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="201,54,284,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="184,102,301,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="177,150,308,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="361,6,441,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="359,54,444,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="360,102,443,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="faccc5859f1ce4adda3e19c911fd4b70"></a><!-- doxytag: member="koala.c::koa_readProximity" ref="faccc5859f1ce4adda3e19c911fd4b70" args="(knet_dev_t *dev, int *senstable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readProximity           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>senstable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the koala proximity sensor value. The 16 values are returned within the senstable, which must be allocated by the caller.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>senstable</em>&nbsp;</td><td>An array of 16 integer to store the sensor values</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00673">673</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>Referenced by <a class="el" href="koala__demo_8c-source.html#l00360">koa_sensor_task()</a>, and <a class="el" href="koala__GoAutomation_8c-source.html#l00111">thread()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_faccc5859f1ce4adda3e19c911fd4b70_cgraph.png" border="0" usemap="#koala_8c_faccc5859f1ce4adda3e19c911fd4b70_cgraph_map" alt=""></center>
<map name="koala_8c_faccc5859f1ce4adda3e19c911fd4b70_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="209,54,292,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="192,102,309,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="185,150,316,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="369,6,449,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="367,54,452,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="368,102,451,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="0e3de8c5ae6c312fd4dca6c220941f77"></a><!-- doxytag: member="koala.c::koa_readSensor" ref="0e3de8c5ae6c312fd4dca6c220941f77" args="(knet_dev_t *dev, int sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readSensor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sensor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the value measured on one of the management sensors. Available sensors are: 0:BATTERY VOLTAGE (measure unit: 20 mV). 1: GENERAL CONSUMPTION CURRENT (measure unit: 8 mA). 2: AMBIENT TEMPERATURE (measure unit: 0.1° C). 3: LEFT MOTOR CURRENT (measure unit: 4 mA). 4: RIGHT MOTOR CURRENT (measure unit: 4 mA). 5: BATTERY TEMPERATURE (measure unit: 0.1° C).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor number to read</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;0 on error or the sensor value on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00482">482</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_0e3de8c5ae6c312fd4dca6c220941f77_cgraph.png" border="0" usemap="#koala_8c_0e3de8c5ae6c312fd4dca6c220941f77_cgraph_map" alt=""></center>
<map name="koala_8c_0e3de8c5ae6c312fd4dca6c220941f77_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="196,54,279,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="179,102,296,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="172,150,303,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="356,6,436,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="353,54,439,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="355,102,437,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="44c2a7d9bcf184de7baade19c92ac893"></a><!-- doxytag: member="koala.c::koa_readSpeed" ref="44c2a7d9bcf184de7baade19c92ac893" args="(knet_dev_t *dev, int *speedtable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readSpeed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>speedtable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the instantaneous speed of the two motors. The unit is the pulse/10 ms that corresponds to 4.5 millimetres per second.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>speedtable</em>&nbsp;</td><td>Array of 2 integer to store the speed readings</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>speedtable[0] is left motor speed <p>
speedtable[1] is right motor speed </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00242">242</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_44c2a7d9bcf184de7baade19c92ac893_cgraph.png" border="0" usemap="#koala_8c_44c2a7d9bcf184de7baade19c92ac893_cgraph_map" alt=""></center>
<map name="koala_8c_44c2a7d9bcf184de7baade19c92ac893_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="191,54,273,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="173,102,291,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="167,150,297,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="351,6,431,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="348,54,433,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="349,102,432,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="311e000617e027e2dc6436a1f3bd5a44"></a><!-- doxytag: member="koala.c::koa_readStatus" ref="311e000617e027e2dc6436a1f3bd5a44" args="(knet_dev_t *dev, int *statustable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_readStatus           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>statustable</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read the status of the motion controller. The status is given by three numbers for every motor: T (target), M (mode) and E (error). T=0 means that the robot is still on movement. T=1 means that the robot is on the target position. M=0 means that the current displacement is controlled in the position mode. M=1 means that the current displacement is controlled in the speed mode. E indicates controller position or speed error.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>statustable</em>&nbsp;</td><td>Array of 6 short unsigned to store the status flags </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00414">414</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>, and <a class="el" href="koala_8c-source.html#l00028">koa_get_nextValue()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_311e000617e027e2dc6436a1f3bd5a44_cgraph.png" border="0" usemap="#koala_8c_311e000617e027e2dc6436a1f3bd5a44_cgraph_map" alt=""></center>
<map name="koala_8c_311e000617e027e2dc6436a1f3bd5a44_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="191,54,273,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="173,102,291,126"><area shape="rect" href="koala_8c.html#4d5572ad917e13387dc93ad78e009e39" title="koa_get_nextValue" alt="" coords="167,150,297,174"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="351,6,431,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="348,54,433,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="349,102,432,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="dc8b7cf0c53ad8fd6dbd6f2848d8626b"></a><!-- doxytag: member="koala.c::koa_setOutput" ref="dc8b7cf0c53ad8fd6dbd6f2848d8626b" args="(knet_dev_t *dev, int output, int action)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setOutput           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>action</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Perform an action on one of the general output lines of the robot. Possible actions are: 0: turn OFF, 1: turn ON, 2: change status. Outputs 0 to 7 are the open drain outputs. The ON status correspond to the transistor closed.Outputs 8 to 11 are the digital ones.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>output</em>&nbsp;</td><td>output number to change </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>action to perform</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00645">645</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_dc8b7cf0c53ad8fd6dbd6f2848d8626b_cgraph.png" border="0" usemap="#koala_8c_dc8b7cf0c53ad8fd6dbd6f2848d8626b_cgraph_map" alt=""></center>
<map name="koala_8c_dc8b7cf0c53ad8fd6dbd6f2848d8626b_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="177,54,260,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="160,102,277,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="329,6,409,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="327,54,412,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="328,102,411,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="593ec88734d2e817a81d18a9ada447f2"></a><!-- doxytag: member="koala.c::koa_setPidPosition" ref="593ec88734d2e817a81d18a9ada447f2" args="(knet_dev_t *dev, int Kp, int Ki, int Kd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setPidPosition           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Configure the position PID controller. On robot reset the values are set to default of Kp to 400, Ki to 4, Kd to 400.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Kp</em>&nbsp;</td><td>Proportional Gain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Ki</em>&nbsp;</td><td>Integral Gain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Kd</em>&nbsp;</td><td>Derivative Gain</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00118">118</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_593ec88734d2e817a81d18a9ada447f2_cgraph.png" border="0" usemap="#koala_8c_593ec88734d2e817a81d18a9ada447f2_cgraph_map" alt=""></center>
<map name="koala_8c_593ec88734d2e817a81d18a9ada447f2_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="204,54,287,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="187,102,304,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="356,6,436,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="353,54,439,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="355,102,437,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="fbd5419ae5e9df4dfc9c450358f49eb0"></a><!-- doxytag: member="koala.c::koa_setPidSpeed" ref="fbd5419ae5e9df4dfc9c450358f49eb0" args="(knet_dev_t *dev, int Kp, int Ki, int Kd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setPidSpeed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Ki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Kd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Configure the speed PID controller. On robot reset the values are set to default of Kp to 1000, Ki to 800, Kd to 100.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Kp</em>&nbsp;</td><td>Proportional Gain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Ki</em>&nbsp;</td><td>Integral Gain </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Kd</em>&nbsp;</td><td>Derivative Gain</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00175">175</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_fbd5419ae5e9df4dfc9c450358f49eb0_cgraph.png" border="0" usemap="#koala_8c_fbd5419ae5e9df4dfc9c450358f49eb0_cgraph_map" alt=""></center>
<map name="koala_8c_fbd5419ae5e9df4dfc9c450358f49eb0_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="196,54,279,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="179,102,296,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="348,6,428,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="345,54,431,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="347,102,429,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="5e59b725e414e0312c5ea8c067111dbd"></a><!-- doxytag: member="koala.c::koa_setPosition" ref="5e59b725e414e0312c5ea8c067111dbd" args="(knet_dev_t *dev, long pos_left, long pos_right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setPosition           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>pos_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>pos_right</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicate to the wheel position controller an absolute position to be reached. The motion control perform the movement using the three control phases of a trapezoidal speed shape: an acceleration, a constant speed and a deceleration period. These phases are performed according to the parameters selected for the trapezoidal speed controller (command J). The maximum distance that can be given by this command is (2**23)-2 pulses that correspond to 318m. The unit is the pulse that corresponds to 0.045mm. The movement is done immediately after the command is sent. In the case another command is under execution (speed or position control) the last command replaces the precedent one. Any replacement transition follows acceleration and maximal speed constraints.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pos_left</em>&nbsp;</td><td>Target position for the left motor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pos_right</em>&nbsp;</td><td>Target position for the right motor</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00212">212</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_5e59b725e414e0312c5ea8c067111dbd_cgraph.png" border="0" usemap="#koala_8c_5e59b725e414e0312c5ea8c067111dbd_cgraph_map" alt=""></center>
<map name="koala_8c_5e59b725e414e0312c5ea8c067111dbd_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="185,54,268,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="168,102,285,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="337,6,417,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="335,54,420,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="336,102,419,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="375a495b9e50786b06c6a290c94f2dfe"></a><!-- doxytag: member="koala.c::koa_setPositionCounter" ref="375a495b9e50786b06c6a290c94f2dfe" args="(knet_dev_t *dev, long pos_left, long pos_right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setPositionCounter           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>pos_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>pos_right</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the 32 bit position counter of the two motors. The unit is the pulse, that corresponds to 0,045 mm.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>left_pos</em>&nbsp;</td><td>Value to set left position counter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>right_pos</em>&nbsp;</td><td>Value to set right position counter</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00146">146</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>Referenced by <a class="el" href="koala__GoAutomation_8c-source.html#l00081">init()</a>, <a class="el" href="koala__GoAutomation_8c-source.html#l00382">reset()</a>, and <a class="el" href="koala__GoAutomation_8c-source.html#l00111">thread()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_375a495b9e50786b06c6a290c94f2dfe_cgraph.png" border="0" usemap="#koala_8c_375a495b9e50786b06c6a290c94f2dfe_cgraph_map" alt=""></center>
<map name="koala_8c_375a495b9e50786b06c6a290c94f2dfe_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="231,54,313,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="213,102,331,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="383,6,463,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="380,54,465,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="381,102,464,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="6883b19613f76681aefb5ddadaa8fd15"></a><!-- doxytag: member="koala.c::koa_setProfile" ref="6883b19613f76681aefb5ddadaa8fd15" args="(knet_dev_t *dev, int max_speed_left, int acc_left, int max_speed_right, int acc_right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setProfile           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max_speed_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>acc_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max_speed_right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>acc_right</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the Speed and the acceleration for the trapezoidal speed shape of the position controller. The max_speed parameter indicates the maximal speed reached during the displacement. The unit for the speed is the pulse/10ms that corresponds to 4.5 mm/s. The unit for the acceleration is the ((pulse/256)/10 ms)/10 ms, that correspond to 1.758 mm/s2. At the reset, these parameters are set to standard values: max_speed to 20, acc to 64.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_speed_left</em>&nbsp;</td><td>Maximum speed for the left motor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>acc_left</em>&nbsp;</td><td>Acceleration for the left motor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_speed_right</em>&nbsp;</td><td>Maximum speed for the right motor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>acc_right</em>&nbsp;</td><td>Acceleration for the right motor</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00384">384</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_6883b19613f76681aefb5ddadaa8fd15_cgraph.png" border="0" usemap="#koala_8c_6883b19613f76681aefb5ddadaa8fd15_cgraph_map" alt=""></center>
<map name="koala_8c_6883b19613f76681aefb5ddadaa8fd15_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="175,54,257,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="157,102,275,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="327,6,407,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="324,54,409,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="325,102,408,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="85da6430792e704136f02fc4ade5b8f2"></a><!-- doxytag: member="koala.c::koa_setPWM" ref="85da6430792e704136f02fc4ade5b8f2" args="(knet_dev_t *dev, int left, int right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setPWM           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>right</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the desired PWM amplitude (see Motors and motor control on page 9 for more details) on the two motors. The minimum PWM ratio is 0 (0%). The maximal forward ratio (100%) correspond to a value of 255. The maximal backwards ratio (100%) correspond to a value of -255.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>left</em>&nbsp;</td><td>Left Motor PWM. (range [-255..255]) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>right</em>&nbsp;</td><td>Right Motor PWM. (range [-255..255]) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00614">614</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_85da6430792e704136f02fc4ade5b8f2_cgraph.png" border="0" usemap="#koala_8c_85da6430792e704136f02fc4ade5b8f2_cgraph_map" alt=""></center>
<map name="koala_8c_85da6430792e704136f02fc4ade5b8f2_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="172,54,255,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="155,102,272,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="324,6,404,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="321,54,407,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="323,102,405,126"></map>
</div>

</div>
</div><p>
<a class="anchor" name="25b7fcd976cee429c949b50b606ea842"></a><!-- doxytag: member="koala.c::koa_setSpeed" ref="25b7fcd976cee429c949b50b606ea842" args="(knet_dev_t *dev, short int left, short int right)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int koa_setSpeed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknet__dev__s.html">knet_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&nbsp;</td>
          <td class="paramname"> <em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&nbsp;</td>
          <td class="paramname"> <em>right</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function changes the speed of the left &amp; right motor of the Koala robot. Set the speed of the two motors. The unit is the pulse/10 ms that corres-ponds to 4.5 millimetres per second.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dev</em>&nbsp;</td><td>K-Net Device Descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>left</em>&nbsp;</td><td>Left Motor Speed. (range [-127..127]) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>right</em>&nbsp;</td><td>Right Motor Speed. (range [-127..127]) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&lt;=0 on error or &gt;0 on sucess</dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>A speed of '0' stops the motor. </dd></dl>

<p>Definition at line <a class="el" href="koala_8c-source.html#l00516">516</a> of file <a class="el" href="koala_8c-source.html">koala.c</a>.</p>

<p>References <a class="el" href="gpio__test_8c-source.html#l00223">buf</a>, <a class="el" href="knet_8c-source.html#l01252">knet_printf()</a>, and <a class="el" href="knet_8c-source.html#l01284">knet_read_string()</a>.</p>

<p>Referenced by <a class="el" href="koala__GoAutomation_8c-source.html#l00428">handle_kill()</a>, <a class="el" href="koala__lrf__demo_8c-source.html#l00029">koa_lrf_task()</a>, <a class="el" href="koala__demo_8c-source.html#l00190">koa_net_setspeed()</a>, <a class="el" href="koala__demo_8c-source.html#l00183">koa_net_stop()</a>, <a class="el" href="koala__demo_8c-source.html#l00360">koa_sensor_task()</a>, <a class="el" href="koala__demo_8c-source.html#l00461">main()</a>, <a class="el" href="koala__GoAutomation_8c-source.html#l00348">quit()</a>, and <a class="el" href="koala__GoAutomation_8c-source.html#l00111">thread()</a>.</p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="koala_8c_25b7fcd976cee429c949b50b606ea842_cgraph.png" border="0" usemap="#koala_8c_25b7fcd976cee429c949b50b606ea842_cgraph_map" alt=""></center>
<map name="koala_8c_25b7fcd976cee429c949b50b606ea842_cgraph_map">
<area shape="rect" href="knet_8c.html#213b3af1e62035b3972f4572a9d68998" title="knet_printf" alt="" coords="175,54,257,78"><area shape="rect" href="knet_8c.html#958280a8991353f3325844076669223d" title="knet_read_string" alt="" coords="157,102,275,126"><area shape="rect" href="kb__memory_8c.html#dd347b03be926d914253f46f80e01765" title="kb_realloc" alt="" coords="327,6,407,30"><area shape="rect" href="knet_8c.html#8c383097f8fef553088f53e073b4c9e1" title="knet_llwrite" alt="" coords="324,54,409,78"><area shape="rect" href="knet_8c.html#55448c3291f508086732d70fbb643c30" title="knet_llread" alt="" coords="325,102,408,126"></map>
</div>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Dec 15 11:49:29 2010 for KoreBot Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
